### ⭐️ Spring Boot로 소켓 통신 구현 이슈

WebSocket은 stateful한 양방향 연결이다.

서버가 클라이언트와의 연결을 계속 유지해야 하므로, 각 연결을 저장하고 관리해야 한다.

참고로, HTTP 통신은 요청을 응답하고 접속을 끊기 때문에 클라이언트의 상태정보를 알 수 없는데 이를 Stateless하다고 한다. 따라서, 로그인을 하고 그 상태를 유지한 채로 웹 서비스를 사용하려면 HTTP프로토콜에서 상태를 유지하기 위해 쿠키와 세션에 상태를 저장해야 한다.

쿠키는 틀라이언트에 저장되므로 매 HTTP 요청마다 서버로 전송되므로 단발성 통신에 적합하다. 웹 소켓 통신은 서버가 클라이언트로부터 받은 메시지를 모든 클라이언트에게 즉시 보낼 수 있어야 한다. 따라서, 쿠키로는 실시간 양방향 통신 구현이 불가능하고 세션으로 구현이 가능하다.

#### 세션과 쿠키의 사용목적과 약점, 보안방안

##### ✍️ 쿠키

클라이언트 쪽 로컬에 저장되는 키와 값들이 들어있는 파일이다.

브라우저를 종료해도 데이터가 남아있다.

클라이언트가 읽으므로 상대적으로 빠르다.

##### 구성 요소

이름, 값, 만료시간, 전송할 도메인 이름, 전송할 경로, 보안 연결 여부, HttpOnly여부

##### 취약점

브라우저의 쿠키관리 탭, 쿠키 플러그인을 설치하면 쉽게 조작이 가능하다. 따라서 암호화가 필요하다.
그래서 Secure과 HttpOnly 에 저장된다.

##### ✍️ 세션

서버가 발행하고 서버에서 관리하는 정보이다.

서버에 저장되어 있기 때문에 상대적으로 쿠키보다 더 안전하다.

브라우저 종료 시 세션이 삭제된다.

클라이언트의 요청마다 서버에서 처리해야 한다.

![image](../img/image%20copy%202.png)
